# 上位机开发计划

## 基于C#开发部署于Linux_ARM架构下上位机控制端

- 基于SerialPort开发多串口通信
  - 端口检测、开启/关闭、发送/接受
  - 串口应答-采用同步方式进行串口通信
- 基于modbusRTU协议读写解析串口数据
  - 16进制字节数组转换、读写寄存器、解析响应数据
  - 部分解析使用特殊处理，其余使用统一方法
- 基于Log4Net日志记录系统
  - 控制台日志
  - 文件日志
- 设备实例-设备协议指令转换
  - 配置表（后期维护）
  - 温度感应
    - 获取温度_设备是否异常
  - 门控
    - 门控状态_设备是否异常
    - 开启/关闭门锁
  - 价签
    - 获取显示_设备是否异常
    - 设置价签显示
  - 称重
    - 设备状态_设备是否异常
    - 重量检测
- MQTT客户端
  - 双端，两套不同的发送订阅验证对应不同的门
  - 账密验证
  - 断线重连机制，暂定为5分钟
- 指令转换
  - mqtt服务端发送组合指令
  - 组合指令拆解单条指令
  - 单条指令解析单条modbusRTU协议指令